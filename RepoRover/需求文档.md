# 需求文档：GitHub 仓库指定后缀文件下载工具（Windows 版）

## 1. 引言

### 1.1 目的
本需求文档旨在详细描述一个 Python 工具的需求，该工具用于从 GitHub 仓库中下载指定后缀的文件到本地指定文件夹，而无需克隆整个仓库。此工具将通过 GitHub API 或直接从 GitHub 原始链接下载文件，并支持递归处理子目录。最终产品将被打包为 Windows 可执行文件，以便于在 Windows 操作系统上运行，并提供用户友好的图形用户界面（GUI）。

### 1.2 范围
该工具适用于需要从 GitHub 公开或私有仓库中获取特定类型文件的用户，例如开发者、研究人员和数据科学家等。它将简化获取所需资源的过程，提高工作效率。

## 2. 总体描述

### 2.1 用户特性
- 开发者和技术爱好者，希望快速获取特定类型的文件。
- 数据科学家，需要特定格式的数据文件（如 `.csv`、`.json`）进行分析。
- 研究人员，可能需要特定编程语言的源代码文件（如 `.py`、`.R`）进行研究或学习。
- Windows 用户，希望通过简单的图形界面轻松使用该功能。

### 2.2 功能概述
该工具的主要功能是：
- 从 GitHub 仓库中下载指定后缀的文件。
- 支持递归处理子目录。
- 提供图形用户界面（GUI），方便用户输入参数。
- 尊重 GitHub 的速率限制，避免频繁请求导致的阻塞。
- 支持认证，以便访问私有仓库。
- 提供详细的日志记录，帮助用户跟踪下载进度和问题。
- 打包为 Windows 可执行文件，方便分发和安装。

## 3. 具体需求

### 3.1 功能需求

#### 3.1.1 文件选择
- **需求编号**: F01
- **描述**: 用户能够通过 GUI 输入框指定要下载的文件后缀（如 `.py`, `.js`, `.md` 等）。可以支持多选和自定义输入。
- **优先级**: 高

#### 3.1.2 仓库信息输入
- **需求编号**: F02
- **描述**: 用户可以通过 GUI 输入框提供 GitHub 仓库的完整 URL。工具应自动解析 URL 中的所有者名称、仓库名称和分支名称（默认为主分支）。
- **优先级**: 高

#### 3.1.3 输出路径设置
- **需求编号**: F03
- **描述**: 用户可以通过文件浏览器按钮选择本地文件夹路径，用于保存下载的文件。
- **优先级**: 高

#### 3.1.4 认证支持
- **需求编号**: F04
- **描述**: 如果用户需要访问私有仓库，工具应提供一个安全的方式输入 GitHub Personal Access Token，并在后续操作中使用。
- **优先级**: 中

#### 3.1.5 递归处理
- **需求编号**: F05
- **描述**: 工具应能够递归进入子目录，查找并下载符合要求的文件。
- **优先级**: 高

#### 3.1.6 错误处理
- **需求编号**: F06
- **描述**: 工具应包含基本的错误处理机制，如网络错误、权限不足等，并向用户提供友好的错误信息。
- **优先级**: 高

#### 3.1.7 日志记录
- **需求编号**: F07
- **描述**: 工具应在执行过程中生成详细的日志，记录每个文件的下载状态和任何遇到的问题。日志窗口应集成在 GUI 中，实时显示下载进度。
- **优先级**: 中

#### 3.1.8 GUI 设计
- **需求编号**: F08
- **描述**: 提供一个直观的图形用户界面，包括以下组件：
  - **仓库 URL 输入框**：用于输入 GitHub 仓库的完整 URL。
  - **文件后缀输入框**：用于输入要下载的文件后缀，支持多选和自定义输入。
  - **输出路径选择器**：带有文件浏览器按钮，允许用户选择目标文件夹。
  - **认证输入框**（可选）：用于输入 GitHub Personal Access Token。
  - **开始按钮**：启动下载任务。
  - **取消按钮**：停止正在进行的任务。
  - **日志窗口**：实时显示下载进度和错误信息。
- **优先级**: 高

### 3.2 非功能需求

#### 3.2.1 性能
- **需求编号**: NF01
- **描述**: 工具应尽量减少对 GitHub API 的请求频率，遵守 GitHub 的速率限制。
- **优先级**: 高

#### 3.2.2 可靠性
- **需求编号**: NF02
- **描述**: 工具应具备高可靠性，确保在长时间运行时不会出现崩溃或数据丢失。
- **优先级**: 高

#### 3.2.3 易用性
- **需求编号**: NF03
- **描述**: 提供简单直观的图形用户界面，使得用户可以轻松上手使用。
- **优先级**: 高

#### 3.2.4 安全性
- **需求编号**: NF04
- **描述**: 在传输和存储个人访问令牌时，确保安全性，防止泄露。
- **优先级**: 高

#### 3.2.5 Windows 执行文件
- **需求编号**: NF05
- **描述**: 工具应被编译为 Windows 可执行文件（.exe），以便于分发和安装，无需依赖 Python 环境。
- **优先级**: 高

### 3.3 包装与发布

#### 3.3.1 自动化构建
- **需求编号**: P01
- **描述**: 实现自动化构建流程，确保每次代码更改后都能自动生成最新的 Windows 可执行文件。
- **优先级**: 中

#### 3.3.2 安装程序
- **需求编号**: P02
- **描述**: 创建一个简单的安装程序，包括必要的依赖项和配置文件，使用户能够一键安装和运行该工具。
- **优先级**: 中

#### 3.3.3 更新机制
- **需求编号**: P03
- **描述**: 设计一个更新机制，让用户能够方便地检查和安装新版本。
- **优先级**: 中

## 4. 技术栈

- **编程语言**: Python
- **API**: GitHub REST API v3
- **依赖库**: `requests`, `pathlib`, `argparse` (或其他适合的命令行解析库)
- **GUI 库**: `tkinter` 或 `PyQt`
- **打包工具**: `PyInstaller` 或 `cx_Freeze`

## 5. 测试计划

- **单元测试**: 针对每个主要功能模块编写单元测试，确保其正确性。
- **集成测试**: 模拟真实环境下的操作，验证各组件之间的交互是否正常。
- **性能测试**: 检查工具在大量文件下载情况下的表现，确保其稳定性和效率。
- **兼容性测试**: 在不同版本的 Windows 上测试工具的兼容性和稳定性。

## 6. 文档

- **用户手册**: 包含安装指南、配置说明、使用示例等内容，帮助用户快速开始。
- **开发文档**: 记录项目的架构设计、代码结构、API 使用方法等信息，便于后续维护和发展。

---

### 附录：GUI 操作逻辑

#### 6.1 启动界面
- **启动时**：显示欢迎界面，提示用户输入必要的信息（仓库 URL、文件后缀、输出路径）。
- **默认值**：提供合理的默认值（如主分支、当前工作目录作为输出路径）。

#### 6.2 输入验证
- **仓库 URL**：确保输入的是有效的 GitHub 仓库 URL，并尝试解析所有者、仓库名和分支。
- **文件后缀**：验证输入的文件后缀格式正确，支持多个后缀以逗号分隔。
- **输出路径**：确保选择的文件夹存在且可写入。

#### 6.3 操作按钮
- **开始按钮**：点击后启动下载任务，同时禁用其他输入控件以防止重复提交。
- **取消按钮**：点击后停止正在进行的任务，并恢复输入控件的状态。

#### 6.4 日志窗口
- **实时更新**：下载过程中实时更新日志窗口，显示每一步的操作状态。
- **错误报告**：遇到错误时，及时在日志窗口中显示错误信息，并提供解决方案建议。

#### 6.5 认证管理
- **Token 输入**：如果用户选择访问私有仓库，提供安全的输入方式（如密码框）。
- **Token 存储**：仅在内存中临时存储 Token，不持久化到磁盘，确保安全性。